<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>イベント検索 | GA4 Debug</title>

  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];
      w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
      var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
      j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
      f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NP46PHRL');
  </script>
  <!-- End Google Tag Manager -->

  <!-- 共通CSS -->
  <link rel="stylesheet" href="/web-learning3/common/css/common.css" />
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript>
    <iframe
      src="https://www.googletagmanager.com/ns.html?id=GTM-NP46PHRL"
      height="0"
      width="0"
      style="display:none;visibility:hidden">
    </iframe>
  </noscript>
  <!-- End Google Tag Manager (noscript) -->

  <!-- 共通ヘッダー -->
  <div id="header"></div>
  <script src="/web-learning3/common/header.js"></script>

  <main>
    <h1>イベント検索</h1>

    <!-- 絞り込み・並び替え -->
    <section class="filter">
      <div class="checkbox-group">
        <label>
          <input type="checkbox" name="holiday">
          祝日
        </label>
        <label>
          <input type="checkbox" name="zorome">
          ゾロ目
        </label>
      </div>

      <div class="sort">
        <label>
          並び替え：
          <select name="sort">
            <option value="kana">あいうえお順</option>
            <option value="date">日付順</option>
          </select>
        </label>
      </div>
    </section>

    <!-- カード一覧 -->
    <section class="card-list">

      <article class="card" data-holiday="true" data-zorome="true" data-kana="しょうがつ" data-date="0101">
        <h2>正月</h2>
        <p class="date">1月1日</p>
        <a href="./shougatsu.html">詳細を見る</a>
      </article>

      <article class="card" data-holiday="false" data-zorome="true" data-kana="せつぶん" data-date="0203">
        <h2>節分</h2>
        <p class="date">2月3日</p>
        <a href="./setsubun.html">詳細を見る</a>
      </article>

      <article class="card" data-holiday="true" data-zorome="false" data-kana="しゅんぶんのひ" data-date="0320">
        <h2>春分の日</h2>
        <p class="date">3月20日</p>
        <a href="./shunbun.html">詳細を見る</a>
      </article>

      <article class="card" data-holiday="false" data-zorome="true" data-kana="ひなまつり" data-date="0303">
        <h2>ひなまつり</h2>
        <p class="date">3月3日</p>
        <a href="./hina.html">詳細を見る</a>
      </article>

      <article class="card" data-holiday="true" data-zorome="true" data-kana="こどものひ" data-date="0505">
        <h2>こどもの日</h2>
        <p class="date">5月5日</p>
        <a href="./kodomo.html">詳細を見る</a>
      </article>

      <article class="card" data-holiday="true" data-zorome="true" data-kana="やまのひ" data-date="0811">
        <h2>山の日</h2>
        <p class="date">8月11日</p>
        <a href="./yama.html">詳細を見る</a>
      </article>

      <article class="card" data-holiday="true" data-zorome="false" data-kana="きんろうかんしゃのひ" data-date="1123">
        <h2>勤労感謝の日</h2>
        <p class="date">11月23日</p>
        <a href="./kinrou.html">詳細を見る</a>
      </article>

      <article class="card" data-holiday="false" data-zorome="false" data-kana="くりすます" data-date="1225">
        <h2>クリスマス</h2>
        <p class="date">12月25日</p>
        <a href="./christmas.html">詳細を見る</a>
      </article>

    </section>
  </main>

  <!-- 共通フッター -->
  <div id="footer"></div>
  <script src="/web-learning3/common/footer.js"></script>

  <!-- 絞り込み・並び替えJS -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const holidayCheckbox = document.querySelector('input[name="holiday"]');
      const zoromeCheckbox = document.querySelector('input[name="zorome"]');
      const sortSelect = document.querySelector('select[name="sort"]');
      const cardList = document.querySelector(".card-list");
      const cards = Array.from(document.querySelectorAll(".card"));

      function filterCards() {
        cards.forEach(card => {
          const isHoliday = card.dataset.holiday === "true";
          const isZorome = card.dataset.zorome === "true";

          let visible = true;
          if (holidayCheckbox.checked && !isHoliday) visible = false;
          if (zoromeCheckbox.checked && !isZorome) visible = false;

          card.style.display = visible ? "block" : "none";
        });
      }

      function sortCards() {
        const value = sortSelect.value;
        const sorted = [...cards].sort((a, b) => {
          if (value === "kana") {
            return a.dataset.kana.localeCompare(b.dataset.kana, "ja");
          }
          if (value === "date") {
            return a.dataset.date.localeCompare(b.dataset.date);
          }
          return 0;
        });
        sorted.forEach(card => cardList.appendChild(card));
      }

      holidayCheckbox.addEventListener("change", filterCards);
      zoromeCheckbox.addEventListener("change", filterCards);
      sortSelect.addEventListener("change", sortCards);
    });
  </script>

</body>
</html>
